{
  "version": 4,
  "terraform_version": "1.12.2",
  "serial": 90,
  "lineage": "cc76efcd-0ca9-a43b-33ac-a68ba38947f3",
  "outputs": {
    "api_gateway_url": {
      "value": "https://cdf3t7eyc6.execute-api.ap-southeast-2.amazonaws.com/prod/cg",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "Asia Pacific (Sydney)",
            "endpoint": "ec2.ap-southeast-2.amazonaws.com",
            "id": "ap-southeast-2",
            "name": "ap-southeast-2"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_deployment",
      "name": "llm_deployment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "canary_settings": [],
            "created_date": "2025-08-04T23:29:41Z",
            "description": "",
            "execution_arn": "arn:aws:execute-api:ap-southeast-2:235494807105:cdf3t7eyc6/",
            "id": "dotbl2",
            "invoke_url": "https://cdf3t7eyc6.execute-api.ap-southeast-2.amazonaws.com/",
            "rest_api_id": "cdf3t7eyc6",
            "stage_description": null,
            "stage_name": null,
            "triggers": null,
            "variables": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_api_gateway_integration.lambda_integration",
            "aws_api_gateway_method.llm_post",
            "aws_api_gateway_resource.llm_resource",
            "aws_api_gateway_rest_api.llm_api",
            "data.aws_region.current",
            "module.llm_lambda.aws_iam_role.lambda_role",
            "module.llm_lambda.aws_lambda_function.function"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_integration",
      "name": "lambda_integration",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cache_key_parameters": [],
            "cache_namespace": "t62c2n",
            "connection_id": "",
            "connection_type": "INTERNET",
            "content_handling": "",
            "credentials": "",
            "http_method": "POST",
            "id": "agi-cdf3t7eyc6-t62c2n-POST",
            "integration_http_method": "POST",
            "passthrough_behavior": "WHEN_NO_MATCH",
            "request_parameters": {},
            "request_templates": {},
            "resource_id": "t62c2n",
            "rest_api_id": "cdf3t7eyc6",
            "timeout_milliseconds": 29000,
            "tls_config": [],
            "type": "AWS_PROXY",
            "uri": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:235494807105:function:qa_lambda/invocations"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_api_gateway_method.llm_post",
            "aws_api_gateway_resource.llm_resource",
            "aws_api_gateway_rest_api.llm_api",
            "data.aws_region.current",
            "module.llm_lambda.aws_iam_role.lambda_role",
            "module.llm_lambda.aws_lambda_function.function"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_integration",
      "name": "options_integration",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "cache_key_parameters": [],
            "cache_namespace": "t62c2n",
            "connection_id": "",
            "connection_type": "INTERNET",
            "content_handling": "",
            "credentials": "",
            "http_method": "OPTIONS",
            "id": "agi-cdf3t7eyc6-t62c2n-OPTIONS",
            "integration_http_method": "",
            "passthrough_behavior": "WHEN_NO_MATCH",
            "request_parameters": {},
            "request_templates": {
              "application/json": "{\"statusCode\": 200}"
            },
            "resource_id": "t62c2n",
            "rest_api_id": "cdf3t7eyc6",
            "timeout_milliseconds": 29000,
            "tls_config": [],
            "type": "MOCK",
            "uri": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_api_gateway_method.options_method",
            "aws_api_gateway_resource.llm_resource",
            "aws_api_gateway_rest_api.llm_api"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_integration_response",
      "name": "options_integration_response",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content_handling": "",
            "http_method": "OPTIONS",
            "id": "agir-cdf3t7eyc6-t62c2n-OPTIONS-200",
            "resource_id": "t62c2n",
            "response_parameters": {
              "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'",
              "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'",
              "method.response.header.Access-Control-Allow-Origin": "'*'"
            },
            "response_templates": {},
            "rest_api_id": "cdf3t7eyc6",
            "selection_pattern": "",
            "status_code": "200"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_api_gateway_method.options_method",
            "aws_api_gateway_method_response.options_200",
            "aws_api_gateway_resource.llm_resource",
            "aws_api_gateway_rest_api.llm_api"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_integration_response",
      "name": "post_integration_response",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content_handling": "",
            "http_method": "POST",
            "id": "agir-cdf3t7eyc6-t62c2n-POST-200",
            "resource_id": "t62c2n",
            "response_parameters": {
              "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'",
              "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'",
              "method.response.header.Access-Control-Allow-Origin": "'*'"
            },
            "response_templates": null,
            "rest_api_id": "cdf3t7eyc6",
            "selection_pattern": "",
            "status_code": "200"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_api_gateway_method.llm_post",
            "aws_api_gateway_method_response.post_200",
            "aws_api_gateway_resource.llm_resource",
            "aws_api_gateway_rest_api.llm_api"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_method",
      "name": "llm_post",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_key_required": false,
            "authorization": "NONE",
            "authorization_scopes": [],
            "authorizer_id": "",
            "http_method": "POST",
            "id": "agm-cdf3t7eyc6-t62c2n-POST",
            "operation_name": "",
            "request_models": {},
            "request_parameters": {},
            "request_validator_id": "",
            "resource_id": "t62c2n",
            "rest_api_id": "cdf3t7eyc6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_api_gateway_resource.llm_resource",
            "aws_api_gateway_rest_api.llm_api"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_method",
      "name": "options_method",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_key_required": false,
            "authorization": "NONE",
            "authorization_scopes": [],
            "authorizer_id": "",
            "http_method": "OPTIONS",
            "id": "agm-cdf3t7eyc6-t62c2n-OPTIONS",
            "operation_name": "",
            "request_models": {},
            "request_parameters": {},
            "request_validator_id": "",
            "resource_id": "t62c2n",
            "rest_api_id": "cdf3t7eyc6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_api_gateway_resource.llm_resource",
            "aws_api_gateway_rest_api.llm_api"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_method_response",
      "name": "options_200",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "http_method": "OPTIONS",
            "id": "agmr-cdf3t7eyc6-t62c2n-OPTIONS-200",
            "resource_id": "t62c2n",
            "response_models": {},
            "response_parameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true
            },
            "rest_api_id": "cdf3t7eyc6",
            "status_code": "200"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_api_gateway_method.options_method",
            "aws_api_gateway_resource.llm_resource",
            "aws_api_gateway_rest_api.llm_api"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_method_response",
      "name": "post_200",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "http_method": "POST",
            "id": "agmr-cdf3t7eyc6-t62c2n-POST-200",
            "resource_id": "t62c2n",
            "response_models": {},
            "response_parameters": {
              "method.response.header.Access-Control-Allow-Headers": true,
              "method.response.header.Access-Control-Allow-Methods": true,
              "method.response.header.Access-Control-Allow-Origin": true
            },
            "rest_api_id": "cdf3t7eyc6",
            "status_code": "200"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_api_gateway_method.llm_post",
            "aws_api_gateway_resource.llm_resource",
            "aws_api_gateway_rest_api.llm_api"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_resource",
      "name": "llm_resource",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "t62c2n",
            "parent_id": "1lky0fs4j5",
            "path": "/cg",
            "path_part": "cg",
            "rest_api_id": "cdf3t7eyc6"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_api_gateway_rest_api.llm_api"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_rest_api",
      "name": "llm_api",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_key_source": "HEADER",
            "arn": "arn:aws:apigateway:ap-southeast-2::/restapis/cdf3t7eyc6",
            "binary_media_types": [],
            "body": null,
            "created_date": "2025-08-04T23:15:46Z",
            "description": "API Gateway for LLM Lambda function",
            "disable_execute_api_endpoint": false,
            "endpoint_configuration": [
              {
                "ip_address_type": "ipv4",
                "types": [
                  "EDGE"
                ],
                "vpc_endpoint_ids": []
              }
            ],
            "execution_arn": "arn:aws:execute-api:ap-southeast-2:235494807105:cdf3t7eyc6",
            "fail_on_warnings": null,
            "id": "cdf3t7eyc6",
            "minimum_compression_size": "",
            "name": "cg-api",
            "parameters": null,
            "policy": "",
            "put_rest_api_mode": null,
            "root_resource_id": "1lky0fs4j5",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_stage",
      "name": "llm_stage",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_log_settings": [],
            "arn": "arn:aws:apigateway:ap-southeast-2::/restapis/cdf3t7eyc6/stages/prod",
            "cache_cluster_enabled": false,
            "cache_cluster_size": "",
            "canary_settings": [],
            "client_certificate_id": "",
            "deployment_id": "dotbl2",
            "description": "",
            "documentation_version": "",
            "execution_arn": "arn:aws:execute-api:ap-southeast-2:235494807105:cdf3t7eyc6/prod",
            "id": "ags-cdf3t7eyc6-prod",
            "invoke_url": "https://cdf3t7eyc6.execute-api.ap-southeast-2.amazonaws.com/prod",
            "rest_api_id": "cdf3t7eyc6",
            "stage_name": "prod",
            "tags": {},
            "tags_all": {},
            "variables": {},
            "web_acl_arn": "",
            "xray_tracing_enabled": false
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_api_gateway_deployment.llm_deployment",
            "aws_api_gateway_integration.lambda_integration",
            "aws_api_gateway_method.llm_post",
            "aws_api_gateway_resource.llm_resource",
            "aws_api_gateway_rest_api.llm_api",
            "data.aws_region.current",
            "module.llm_lambda.aws_iam_role.lambda_role",
            "module.llm_lambda.aws_lambda_function.function"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_api_gateway_usage_plan",
      "name": "llm_usage_plan",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_stages": [
              {
                "api_id": "cdf3t7eyc6",
                "stage": "prod",
                "throttle": []
              }
            ],
            "arn": "arn:aws:apigateway:ap-southeast-2::/usageplans/rlk1zd",
            "description": "",
            "id": "rlk1zd",
            "name": "llm-usage-plan",
            "product_code": "",
            "quota_settings": [
              {
                "limit": 200,
                "offset": 0,
                "period": "MONTH"
              }
            ],
            "tags": {},
            "tags_all": {},
            "throttle_settings": [
              {
                "burst_limit": 10,
                "rate_limit": 10
              }
            ]
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_api_gateway_deployment.llm_deployment",
            "aws_api_gateway_integration.lambda_integration",
            "aws_api_gateway_method.llm_post",
            "aws_api_gateway_resource.llm_resource",
            "aws_api_gateway_rest_api.llm_api",
            "aws_api_gateway_stage.llm_stage",
            "data.aws_region.current",
            "module.llm_lambda.aws_iam_role.lambda_role",
            "module.llm_lambda.aws_lambda_function.function"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_bedrockagent_agent",
      "name": "cs_bot_agent",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "agent_arn": "arn:aws:bedrock:ap-southeast-2:235494807105:agent/RFTB05XU5M",
            "agent_collaboration": "DISABLED",
            "agent_id": "RFTB05XU5M",
            "agent_name": "cs-bot-agent",
            "agent_resource_role_arn": "arn:aws:iam::235494807105:role/cs-bot-agent-role",
            "agent_version": null,
            "customer_encryption_key_arn": null,
            "description": "Customer service bot agent for shoe purchase support",
            "foundation_model": "amazon.nova-lite-v1:0",
            "guardrail_configuration": null,
            "id": "RFTB05XU5M",
            "idle_session_ttl_in_seconds": 600,
            "instruction": "######### Sample prompt #########\n\nYou are an agent that helps customer purchase shoes. Retreive customer details like customer ID and preferred activity based on the name. The check inventory for the shoes bests fit activity matching customer preferred activity. Generate response with shoe ID, style description and colors based on shoes inventory details. if multiple matches exists, display all of them to the user. After customer indicates they would like to order the shoe, use the shoe ID corresponding to their choice and customer ID from intial customer details retrieved, to place the order for the shoe.\n\n######### Sample SQL Code #########\nSELECT * FROM customer_db.CustomerInfo LIMIT 10;",
            "memory_configuration": null,
            "prepare_agent": true,
            "prepared_at": "2025-08-04T23:29:41Z",
            "prompt_override_configuration": [
              {
                "override_lambda": null,
                "prompt_configurations": null
              }
            ],
            "skip_resource_in_use_check": false,
            "tags": null,
            "tags_all": {},
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "dependencies": [
            "aws_iam_role.cs_bot_agent_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_bedrockagent_agent_action_group",
      "name": "cs_bot_action_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action_group_executor": [
              {
                "custom_control": null,
                "lambda": "arn:aws:lambda:ap-southeast-2:235494807105:function:qa_lambda"
              }
            ],
            "action_group_id": "1KVK8CH2NQ",
            "action_group_name": "cs_bot_action_group",
            "action_group_state": "ENABLED",
            "agent_id": "RFTB05XU5M",
            "agent_version": "DRAFT",
            "api_schema": [
              {
                "payload": "{\n\"openapi\": \"3.0.0\",\n    \"info\": {\n        \"title\": \"Customer Service Bot API\",\n        \"version\": \"1.0.0\",\n        \"description\": \"Customer service APIs for a retail store selling shoes\"\n    },\n    \"paths\": {\n        \"/customer/{CustomerName}\": {\n            \"get\": {\n                \"summary\": \"Get customer information\",\n                \"description\": \"Based on provided customer name, return customer information like customer ID, preferred activity and others\",\n                \"operationId\": \"getCustomerInfo\",\n                \"parameters\": [{\n                    \"name\": \"CustomerName\",\n                    \"in\": \"path\",\n                    \"description\": \"Customer Name\",\n                    \"required\": true,\n                    \"schema\": {\n                        \"type\": \"string\"\n                    }\n                }],\n                \"responses\": {\n                    \"200\": {\n                        \"description\": \"Get customer information\",\n                        \"content\": {\n                            \"application/json\": {\n                                \"schema\": {\n                                    \"type\": \"array\",\n                                    \"items\": {\n                                        \"type\": \"object\",\n                                        \"properties\": {\n                                            \"CustomerID\": {\n                                                \"type\": \"int\",\n                                                \"description\": \"This is the Customer ID used to place the order\"\n                                            },\n                                            \"Addr1\": {\n                                                \"type\": \"string\",\n                                                \"description\": \"Customer billing address line1\"\n                                            },\n                                            \"Addr2\": {\n                                                \"type\": \"string\",\n                                                \"description\": \"Customer billing address line2\"\n                                            },\n                                            \"City\": {\n                                                \"type\": \"string\",\n                                                \"description\": \"Customer billing city\"\n                                            },\n                                            \"State\": {\n                                                \"type\": \"string\",\n                                                \"description\": \"Customer billing state\"\n                                            },\n                                            \"Zipcode\": {\n                                                \"type\": \"string\",\n                                                \"description\": \"Customer billing zipcode\"\n                                            },\n                                            \"PreferredActivity\": {\n                                                \"type\": \"string\",\n                                                \"description\": \"Customer preferred activity\"\n                                            },\n                                            \"ShoeSize\": {\n                                                \"type\": \"int\",\n                                                \"description\": \"Customer shoe size\"\n                                            },\n                                            \"OtherInfo\": {\n                                                \"type\": \"string\",\n                                                \"description\": \"Additional information about customer like interests\"\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        \"/place_order\": {\n            \"get\": {\n                \"summary\": \"Sub task to place an order on behalf of the customer\",\n                \"description\": \"Place an order for a shoe by creating an Order record and updating inventory in the database\",\n                \"operationId\": \"placeshoeOrder\",\n                \"parameters\": [{\n                    \"name\": \"ShoeID\",\n                    \"in\": \"query\",\n                    \"description\": \"Shoe ID to place an order\",\n                    \"required\": true,\n                    \"schema\": {\n                        \"type\": \"int\"\n                    }\n                },\n                {\n                    \"name\": \"CustomerID\",\n                    \"in\": \"query\",\n                    \"description\": \"Customer ID to place an order\",\n                    \"required\": true,\n                    \"schema\": {\n                        \"type\": \"int\"\n                    }\n                }],\n                \"responses\": {\n                    \"200\": {\n                        \"description\": \"Order has been placed\",\n                        \"content\": {\n                            \"application/json\": {\n                                \"schema\": {\n                                    \"type\": \"object\",\n                                    \"properties\": {\n                                        \"message\": {\n                                            \"type\": \"string\",\n                                            \"description\": \"Your order has been placed\"\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        \"/check_inventory\": {\n            \"get\": {\n                \"summary\": \"Returns all details related to shoes, including inventory details\",\n                \"description\": \"Checks inventory for shoes and returns all availale information about available shoes, including shoe ID, shoe colors, inventory, best fit activity, style description and price \",\n                \"operationId\": \"checkShoeInventory\",\n                \"responses\": {\n                    \"200\": {\n                        \"description\": \"Returns Shoe information\",\n                        \"content\": {\n                            \"application/json\": {\n                                \"schema\": {\n                                    \"type\": \"object\",\n                                    \"properties\": {\n                                        \"ShoeID\": {\n                                            \"type\": \"int\",\n                                            \"description\": \"This is the shoe ID for this shoe\"\n                                        },\n                                         \"BestFitActivity\": {\n                                            \"type\": \"string\",\n                                            \"description\": \"Best fit activity for this shoe\"\n                                        },\n                                         \"StyleDesc\": {\n                                            \"type\": \"string\",\n                                            \"description\": \"Detailed description of the shoe\"\n                                        },\n                                         \"ShoeColors\": {\n                                            \"type\": \"string\",\n                                            \"description\": \"The colors of this shoe\"\n                                        },\n                                         \"Price\": {\n                                            \"type\": \"string\",\n                                            \"description\": \"Price of this shoe\"\n                                        },\n                                         \"InvCount\": {\n                                            \"type\": \"int\",\n                                            \"description\": \"Inventory count\"\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }    \n}\n",
                "s3": []
              }
            ],
            "description": null,
            "function_schema": [],
            "id": "1KVK8CH2NQ,RFTB05XU5M,DRAFT",
            "parent_action_group_signature": null,
            "prepare_agent": true,
            "skip_resource_in_use_check": false,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "dependencies": [
            "aws_bedrockagent_agent.cs_bot_agent",
            "aws_iam_role.cs_bot_agent_role",
            "module.llm_lambda.aws_iam_role.lambda_role",
            "module.llm_lambda.aws_lambda_function.function"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "cs_bot_agent_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::235494807105:role/cs-bot-agent-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"bedrock.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-08-04T23:23:25Z",
            "description": "",
            "force_detach_policies": false,
            "id": "cs-bot-agent-role",
            "inline_policy": [
              {
                "name": "cs-bot-agentModelPolicy",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"bedrock:InvokeModel\",\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "cs-bot-agent-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {},
            "tags_all": {},
            "unique_id": "AROATNVEVSZAU6GDKCCOV"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "cs_bot_agent_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "cs-bot-agent-role:cs-bot-agentModelPolicy",
            "name": "cs-bot-agentModelPolicy",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"bedrock:InvokeModel\",\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
            "role": "cs-bot-agent-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.cs_bot_agent_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "allow_bedrock_invoke",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "qa_lambda",
            "function_url_auth_type": null,
            "id": "AllowExecutionFromBedrock",
            "principal": "bedrock.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": null,
            "statement_id": "AllowExecutionFromBedrock",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.llm_lambda.aws_iam_role.lambda_role",
            "module.llm_lambda.aws_lambda_function.function"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "api_gateway_permission",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "qa_lambda",
            "function_url_auth_type": null,
            "id": "AllowAPIGatewayInvoke",
            "principal": "apigateway.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": "arn:aws:execute-api:ap-southeast-2:235494807105:cdf3t7eyc6/*/*",
            "statement_id": "AllowAPIGatewayInvoke",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_api_gateway_rest_api.llm_api",
            "module.llm_lambda.aws_iam_role.lambda_role",
            "module.llm_lambda.aws_lambda_function.function"
          ]
        }
      ]
    },
    {
      "module": "module.llm_lambda",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "lambda_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:ap-southeast-2:235494807105:log-group:/aws/lambda/qa_lambda",
            "id": "/aws/lambda/qa_lambda",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/aws/lambda/qa_lambda",
            "name_prefix": "",
            "retention_in_days": 3,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.llm_lambda",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::235494807105:role/qa_lambda-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-08-04T23:23:25Z",
            "description": "",
            "force_detach_policies": false,
            "id": "qa_lambda-role",
            "inline_policy": [
              {
                "name": "qa_lambda-policy",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"},{\"Action\":[\"bedrock:InvokeModel\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:bedrock:ap-southeast-2:235494807105:model*\"]},{\"Action\":[\"s3:GetObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::mst-artifact-bucket\",\"arn:aws:s3:::mst-artifact-bucket/*\"]}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "qa_lambda-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {},
            "tags_all": {},
            "unique_id": "AROATNVEVSZA3CF5E77LO"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.llm_lambda",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "lambda_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "qa_lambda-role:qa_lambda-policy",
            "name": "qa_lambda-policy",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"},{\"Action\":[\"bedrock:InvokeModel\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:bedrock:ap-southeast-2:235494807105:model*\"]},{\"Action\":[\"s3:GetObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::mst-artifact-bucket\",\"arn:aws:s3:::mst-artifact-bucket/*\"]}]}",
            "role": "qa_lambda-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "module.llm_lambda.aws_iam_role.lambda_role"
          ]
        }
      ]
    },
    {
      "module": "module.llm_lambda",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "function",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:ap-southeast-2:235494807105:function:qa_lambda",
            "code_sha256": "a/ThsPBXdDtMxechFi6I0c2IfzyGMr5PHkLoKaTraEM=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "ARTIFACT_BUCKET": "mst-artifact-bucket",
                  "TEMPLATE_FUNCTION": "sagemaker_faqs_template"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": null,
            "function_name": "qa_lambda",
            "handler": "app.lambda_handler",
            "id": "qa_lambda",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:235494807105:function:qa_lambda/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-08-04T23:29:33.382+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/qa_lambda",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:ap-southeast-2:235494807105:function:qa_lambda:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:ap-southeast-2:lambda:path/2015-03-31/functions/arn:aws:lambda:ap-southeast-2:235494807105:function:qa_lambda:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::235494807105:role/qa_lambda-role",
            "runtime": "python3.10",
            "s3_bucket": "mst-artifact-bucket",
            "s3_key": "lambdas/qa_lambda_deployment_package.zip",
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "",
            "source_code_size": 61629682,
            "tags": {},
            "tags_all": {},
            "timeout": 60,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.llm_lambda.aws_iam_role.lambda_role"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
